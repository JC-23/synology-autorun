[{ 
    "step_title": "Configuration", 
    "items": [{ 
        "type": "textfield", 
        "desc": "The script must be located in the root directory of the device and set as executable for the user 'root'. It gets the mount point of the device as the first parameter ($1) and the device as the second ($2).", 
        "subitems": [{
            "key": "config_script", 
            "desc": "Script to execute", 
            "defaultValue": "autorun",
            "validator": {
                "allowBlank": false
            } 
        }] 
    },{ 
        "type": "textfield", 
        "desc": "Path to the 'known_scripts' text file containing a single sha256 hash per line, for each script which is trusted to autorun. From File Station in DSM, right click the text file -> Properties and copy the Location value.<br/><br/>Leave this field empty to disable hash validation.", 
        "subitems": [{
            "key": "known_scripts_path", 
            "desc": "Script to execute", 
            "defaultValue": "/volume1/Admin/Autorun/known_scripts",
            "validator": {
                "allowBlank": true
            } 
        }] 
    },{
        "type": "textfield", 
        "desc": "An exit value of 100 will unmount and eject the device when the script is finished, all other will leave it mounted. You can stop autorun in the package center to temporarily disable it.<br/><br/>The search time is for finding the mount point when a device is attached, the additional wait time gives the DSM some leeway to properly mount the drive before starting the script.<br/>You may have to increase those times depending on your hardware.", 
        "subitems": [{ 
            "key": "config_search", 
            "desc": "Search time (sec)", 
            "defaultValue": "20", 
            "validator": {
                "allowBlank": false,
                "fn": "{if (/^([0-9]+)$/.test(arguments[0])) return true; return 'Enter a positive number!'; }" 
            } 
        },{ 
            "key": "config_wait", 
            "desc": "Wait time (sec)", 
            "defaultValue": "5", 
            "validator": {
                "allowBlank": false,
                "fn": "{if (/^([0-9]+)$/.test(arguments[0])) return true; return 'Enter a positive number!'; }" 
            } 
        }] 
    },{
        "type": "multiselect", 
        "desc": "Status indication while running the script.", 
        "subitems": [{ 
            "key": "config_beep", 
            "desc": "Beep at start and end",
            "defaultValue": true 
        },{ 
            "key": "config_led", 
            "desc": "Use LED (you can safely remove the device when it goes green again)", 
            "defaultValue": true 
        }] 
    },{
        "type": "textfield", 
        "desc": "Send a DSM notification when finished.<br/>You can use a username or a @groupname (including the leading @) or leave empty for no notification.", 
        "subitems": [{ 
            "key": "config_notify", 
            "desc": "Target user / group",
            "defaultValue": "@administrators" 
        }] 
    }] 
}]